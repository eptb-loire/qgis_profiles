metadata:
  title: "Profile EP Loire"
  id: eploire_utilisateur
  description: >-
    Scénario de deploiement des profils utilisateurs, basés sur des secteurs géographiques.

settings:
  SCENARIO_VALIDATION: true


steps:

  - name: Synchronisation des profils depuis le dépôt public
    uses: qprofiles-manager
    with:
      action: download
      source: https://github.com/eptb-loire/qgis_profiles.git
      protocol: git
      branch: main
      local_destination: ~/.cache/qgis-deployment-toolbelt/eploire/

  - name: Set splash screen
    uses: splash-screen-manager
    with:
      action: create_or_restore

  - name: Créer des raccourcis pour les profils
    uses: shortcuts-manager
    with:
      action: create_or_restore
      include:
        - profile: Loire_aval
          label: "Qgis Loire aval"
          additional_arguments: "--noversioncheck"
          desktop: true
          start_menu: true
          icon: "qgis_icone_eploire.ico"
          qgis_path: "C:\\QGIS\\3_28\\bin\\qgis-bin.exe"
        - profile: axe_loire
          label: "Qgis Axe Loire"
          additional_arguments: "--noversioncheck"
          desktop: true
          start_menu: true
          icon: "qgis_icone_eploire.ico"
          qgis_path: "C:\\QGIS\\3_28\\bin\\qgis-bin.exe"
        - profile: cher
          label: "Qgis Bassin du Cher"
          additional_arguments: "--noversioncheck"
          desktop: true
          start_menu: true
          icon: "qgis_icone_eploire.ico"
          qgis_path: "C:\\QGIS\\3_28\\bin\\qgis-bin.exe"
        - profile: haut_bassin
          label: "Qgis Allier et Loire amont"
          additional_arguments: "--noversioncheck"
          desktop: true
          start_menu: true
          icon: "qgis_icone_eploire.ico"
          qgis_path: "C:\\QGIS\\3_28\\bin\\qgis-bin.exe"
        - profile: maine
          label: "Qgis Bassin de la Maine"
          additional_arguments: "--noversioncheck"
          desktop: true
          start_menu: true
          icon: "qgis_icone_eploire.ico"
          qgis_path: "C:\\QGIS\\3_28\\bin\\qgis-bin.exe"
        - profile: support
          label: "Qgis essentiel BV Loire"
          additional_arguments: "--noversioncheck"
          desktop: true
          start_menu: true
          icon: "qgis_icone_eploire.ico"
          qgis_path: "C:\\QGIS\\3_28\\bin\\qgis-bin.exe"
